<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Caça aos Doces 🎃</title>
<style>
  body {
    background-color: #1b0033;
    color: white;
    overflow: hidden;
    font-family: "Comic Sans MS", cursive;
    text-align: center;
  }
  #gameArea {
    position: relative;
    width: 400px;
    height: 500px;
    margin: 20px auto;
    background: linear-gradient(to top, #330066, #000);
    border: 3px solid orange;
    border-radius: 10px;
  }
  .item {
    position: absolute;
    font-size: 30px;
  }
  #basket {
    position: absolute;
    bottom: 10px;
    left: 180px;
    font-size: 40px;
  }
</style>
</head>
<body>

<h2>🍬 Caça aos Doces 🎃</h2>
<p>Pontos: <span id="score">0</span> | Vidas: <span id="lives">3</span></p>
<div id="gameArea">
  <div id="basket">🧺</div>
</div>

<script>
const gameArea = document.getElementById("gameArea");
const basket = document.getElementById("basket");
let score = 0;
let lives = 3;
let basketX = 180;

document.addEventListener("keydown", (e) => {
  if (e.key === "ArrowLeft" && basketX > 0) basketX -= 20;
  if (e.key === "ArrowRight" && basketX < 360) basketX += 20;
  basket.style.left = basketX + "px";
});

function createItem() {
  const item = document.createElement("div");
  item.classList.add("item");
  const isCandy = Math.random() < 0.7;
  item.textContent = isCandy ? "🍬" : "🎃";
  item.style.left = Math.random() * 370 + "px";
  item.style.top = "0px";
  gameArea.appendChild(item);

  const fall = setInterval(() => {
    let top = parseInt(item.style.top);
    if (top < 460) {
      item.style.top = top + 5 + "px";
    } else {
      // colisão
      if (Math.abs(basketX - parseInt(item.style.left)) < 40) {
        if (item.textContent === "🍬") score += 10;
        else lives -= 1;
        document.getElementById("score").textContent = score;
        document.getElementById("lives").textContent = lives;
      }
      clearInterval(fall);
      item.remove();
      if (lives <= 0) endGame();
    }
  }, 50);
}

let game = setInterval(createItem, 700);
setTimeout(() => endGame(), 30000);

function endGame() {
  clearInterval(game);
  alert(`🎃 Fim de jogo! Pontuação: ${score}`);
  location.reload();
}
</script>

</body>
</html>
